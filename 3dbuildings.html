<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Development Area</title>
    <!-- <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"> -->

    <!-- AR.js by @jerome_etienne - github: https://github.com/jeromeetienne/ar.js - info: https://medium.com/arjs/augmented-reality-in-10-lines-of-html-4e193ea9fdbf -->
<!--     <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script> -->
    <!-- import the webpage's javascript file -->

  </head>
	<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
	<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
	<script>
		
// 		AFRAME.registerComponent("OnClickListener", {
// 			init: function(){
// 				const themodel = document.querySelector("#animated-model");
				      
// 				themodel.addEventListener('click',funtion(){
//             			this.target.style.display = "Block";
//           			});
// 			}
// 		});
         AFRAME.registerComponent("listener", {
            init: function() {
	      	this.target = document.querySelector('#target');
// 		this.marker = document.querySelector('#marker');
		const modelinfo = document.querySelector('#model_info');
// 		this.marker.setAttribute('visible', 'true');
	      	this.prevPosition = null;
	      	this.prevRotation = null;
		
		    this.target.addEventListener('click',funtion(){
            			modelinfo.style.display = "Block";
          			});
            },
	   tick: function() {
	     if (this.el.object3D.visible) {
	       this.target.setAttribute('visible', 'true')
	       if(this.prevPosition) {
		 this.target.object3D.position.lerp(this.prevPosition, 1)
		 let rot = this.target.object3D.rotation.toVector3().lerp(this.prevRotation, 1)
		 this.target.object3D.rotation.setFromVector3(rot)
	       } else {
		 this.target.setAttribute('position', this.el.getAttribute('position'))
		 this.target.setAttribute('rotation', this.el.getAttribute('rotation'))
	       }
	       this.prevPosition = this.el.object3D.position
	       this.prevRotation = this.el.object3D.rotation

	      } else {
	       this.target.setAttribute('visible', 'false')
		this.prevPosition = null;
		this.prevRotation = null;
	      }
	   }
           }
//          })
       )


    </script>
  <body>
<!--     <div id='container'> -->
	     <a-scene embedded arjs inspector="https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js">
    		   <a-marker listener id='marker' emitevents="true" cursor="rayOrigin: objects: .clickable" type="pattern" preset="custom" url="https://venuschanhk.github.io/jllmapar.github.io/pattern-jll(2).patt" size="0.03" smooth='true'>
			          <a-box material='opacity: 0;'></a-box>

          			<a-entity
          				id=target
          				position="3.3504 1 0.0756"
          				scale="0.3 0.3 0.3"
          				gltf-model="https://venuschanhk.github.io/jllmapar.github.io/Polygon/developement_area_2_0.glb"
          			></a-entity>


			                <!-- For testing
								<a-box id='target' position="3.22 1 0.22" material='opacity: 1;'></a-box> -->

        </a-marker>
<!-- 			<a-entity
				OnClickListener
				id='target'
				position="3.22 1 2.22"
				scale="0.0000911743 0.0000911743 0.0000911743"
				gltf-model="https://venuschanhk.github.io/jllmapar.github.io/Polygon/GBA_dev_0.glb"
			></a-entity> -->

		    <a-entity camera></a-entity>
	   </a-scene>
     <div id='model_info' style="background-color:rgba(204, 201, 203, 0.4); width:fit-content; height:fit-content; display: none; position:absolute; top:0; left:0">
       <h3>Northern Metropolis Development Area<br>北部都會區發展</h3>
     </div>
<!--     </div> -->
  </body>
</html>
